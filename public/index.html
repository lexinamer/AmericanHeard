<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>American Heard</title>
    <link href="./images/favicon.png" rel="shortcut icon" />

    <link rel="stylesheet" href="./css/main.css" />
    <link rel="stylesheet" href="./css/map.css" />

    <!-- Check out https://fonts.google.com/specimen/Raleway
    and https://fonts.google.com/specimen/Playfair+Display -->
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display|Raleway:500,700" rel="stylesheet">

  </head>
  <body>
    <div class="temp-wrapper">
      <h1>American Heard</h1>
      <p>Lorem Ipsum - Apparently we had reached a great height in the atmosphere,
        for the sky was a dead black, and the stars had ceased to twinkle. By the
        same illusion which lifts the horizon of the sea to the level of the
        spectator on a hillside, the sable cloud beneath was dished out, and the
        car seemed to float in the middle of an immense dark sphere, whose upper
        half was strewn with silver. Looking down into the dark gulf below, I
        could see a ruddy light streaming through a rift in the clouds.</p>
    </div>

    <!-- Code for map, currently failing in local dev environment because of
    cross origin requests for JSON files. Should be fixed once Maegan figures
    out how to deploy a test version of the site with Firebase. Once we confirm
    that the D3.js code + file paths + links are working in the test site, the
    JavaScript should be moved to its own JS file. -->
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="https://d3js.org/queue.v1.min.js"></script>
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    <script>

    var width = 960,
        height = 600;

    var projection = d3.geo.albersUsa()
        .scale(1280)
        .translate([width / 2, height / 2]);

    var path = d3.geo.path()
        .projection(projection);

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);

    queue()
        .defer(d3.json, "./data/us.json")
        .defer(d3.json, "./data/us-congress-113.json")
        .await(ready);

    function ready(error, us, congress) {
      if (error) throw error;

      svg.append("defs").append("path")
          .attr("id", "land")
          .datum(topojson.feature(us, us.objects.land))
          .attr("d", path);

      svg.append("clipPath")
          .attr("id", "clip-land")
        .append("use")
          .attr("xlink:href", "#land");

      svg.append("g")
          .attr("class", "districts")
          .attr("clip-path", "url(#clip-land)")
        .selectAll("path")
          .data(topojson.feature(congress, congress.objects.districts).features)
        .enter().append("path")
          .attr("d", path)
        .append("title")
          .text(function(d) { return d.id; });

      svg.append("path")
          .attr("class", "district-boundaries")
          .datum(topojson.mesh(congress, congress.objects.districts, function(a, b) { return a !== b && (a.id / 1000 | 0) === (b.id / 1000 | 0); }))
          .attr("d", path);

      svg.append("path")
          .attr("class", "state-boundaries")
          .datum(topojson.mesh(us, us.objects.states, function(a, b) { return a !== b; }))
          .attr("d", path);
    }

    d3.select(self.frameElement).style("height", height + "px");

    </script>

  </body>
</html>
